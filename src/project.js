window.__require=function t(o,e,r){function n(c,a){if(!e[c]){if(!o[c]){var s=c.split("/");if(s=s[s.length-1],!o[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+c+"'")}}var u=e[c]={exports:{}};o[c][0].call(u.exports,function(t){return n(o[c][1][t]||t)},u,u.exports,t,o,e,r)}return e[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<r.length;c++)n(r[c]);return n}({Ball:[function(t,o,e){"use strict";cc._RF.push(o,"69ba8olpIJBTaoNmCNYeGqh","Ball"),Object.defineProperty(e,"__esModule",{value:!0});var r=t("./Config"),n=cc._decorator,i=n.ccclass,c=(n.property,function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.rigidBody=null,o.isTouchedGround=!1,o.main=null,o}return __extends(o,t),o.prototype.onLoad=function(){this.rigidBody=this.getComponent(cc.RigidBody)},o.prototype.start=function(){},o.prototype.update=function(t){if(this.isTouchedGround){this.rigidBody.active=!1,this.rigidBody.linearVelocity=cc.Vec2.ZERO;var o=[];o.push(this.node.position),o.push(cc.v2(330,-417)),o.push(cc.v2(325,547)),o.push(cc.v2(152,474)),this.node.runAction(cc.sequence(cc.cardinalSplineTo(2,o,1),cc.callFunc(function(){this.rigidBody.active=!0,this.node.group=r.default.groupBallINRecycle,this.main.recycleBall()}.bind(this)))),this.isTouchedGround=!1}},o.prototype.onBeginContact=function(t,o,e){"ground"==e.node.name&&(this.isTouchedGround=!0)},o.prototype.onPreSolve=function(t,o,e){},o.prototype.onPostSolve=function(t,o,e){},o.prototype.onEndContact=function(t,o,e){},o=__decorate([i],o)}(cc.Component));e.default=c,cc._RF.pop()},{"./Config":"Config"}],Barrier:[function(t,o,e){"use strict";cc._RF.push(o,"7dcd6+1pvpGLYDULA74CEJ7","Barrier"),Object.defineProperty(e,"__esModule",{value:!0});var r=cc._decorator,n=r.ccclass,i=r.property,c=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.lbScore=null,o.isAddBuffBall=!1,o.score=10,o}return __extends(o,t),o.prototype.onLoad=function(){this.lbScore&&this.setScore(this.score)},o.prototype.setScore=function(t){this.lbScore&&(this.score=t,this.lbScore.string=this.score.toString())},o.prototype.onBeginContact=function(t,o,e){this.isAddBuffBall?(this.main.addBall(this.node.position),this.main.removeBarrier(this)):(this.setScore(this.score-1),this.main.addScore(),0==this.score&&this.main.removeBarrier(this))},o.prototype.onPreSolve=function(t,o,e){},o.prototype.onPostSolve=function(t,o,e){},o.prototype.onEndContact=function(t,o,e){},o.prototype.start=function(){this.lbScore.node.rotation=-this.node.rotation},__decorate([i(cc.Label)],o.prototype,"lbScore",void 0),__decorate([i(Boolean)],o.prototype,"isAddBuffBall",void 0),o=__decorate([n],o)}(cc.Component);e.default=c,cc._RF.pop()},{}],Config:[function(t,o,e){"use strict";cc._RF.push(o,"74ab1JyuiVNX42ay7rLEhIs","Config"),Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.groupBallInGame="ballInGame",t.groupBallINRecycle="ballInRecycle",t}();e.default=r,cc._RF.pop()},{}],MainController:[function(t,o,e){"use strict";cc._RF.push(o,"03d61ZPVltB05vtwr7KgFLT","MainController"),Object.defineProperty(e,"__esModule",{value:!0});var r=t("./Ball"),n=t("./Barrier"),i=t("./Config"),c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.prefabsBarriers=[],o.balls=[],o.barriers=[],o.score=-1,o.recycleBallsCount=1,o}return __extends(o,t),o.prototype.onLoad=function(){this.addBarriers(),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.addScore(),this.balls[0].main=this,this.balls[0].node.group=i.default.groupBallINRecycle},o.prototype.addBall=function(t){var o=cc.instantiate(this.prefabBall).getComponent(r.default);o.node.parent=this.node,o.node.position=t,o.main=this,o.node.group=i.default.groupBallInGame,this.balls.push(o)},o.prototype.onTouchStart=function(t){var o=this.node.convertToNodeSpaceAR(t.touch.getLocation());this.isRecycleFinish()&&(this.recycleBallsCount=0,this.shootBalls(o.sub(cc.v2(0,336))))},o.prototype.shootBalls=function(t){for(var o=function(o){var r=e.balls[o];e.scheduleOnce(function(){this.shootBall(r,t)}.bind(e),.3*o)},e=this,r=0;r<this.balls.length;r++)o(r)},o.prototype.shootBall=function(t,o){t.rigidBody.active=!1;var e=[];e.push(t.node.position),e.push(cc.v2(0,336)),t.node.group=i.default.groupBallInGame,t.node.runAction(cc.sequence(cc.cardinalSplineTo(.8,e,.5),cc.callFunc(function(){t.rigidBody.active=!0,t.rigidBody.linearVelocity=o.mul(3)})))},o.prototype.recycleBall=function(){if(this.recycleBallsCount++,this.isRecycleFinish()){for(var t=0;t<this.barriers.length;t++){this.barriers[t].node.runAction(cc.moveBy(.5,cc.v2(0,100)))}this.addBarriers()}},o.prototype.isRecycleFinish=function(){return this.recycleBallsCount==this.balls.length},o.prototype.start=function(){},o.prototype.addBarriers=function(){for(var t=-290+this.getRandomSpace();t<230;){var o=cc.instantiate(this.prefabsBarriers[Math.floor(Math.random()*this.prefabsBarriers.length)]).getComponent(n.default);o.node.parent=this.node,o.node.rotation=360*Math.random(),o.node.position=cc.v2(t,-350),o.main=this,t+=this.getRandomSpace(),this.barriers.push(o)}},o.prototype.addScore=function(){this.lbScoreCount.string=String(this.score++)},o.prototype.removeBarrier=function(t){var o=this.barriers.indexOf(t);-1!=o&&(t.node.removeFromParent(!1),this.barriers.splice(o,1))},o.prototype.getRandomSpace=function(){return 100+100*Math.random()},__decorate([s(cc.Prefab)],o.prototype,"prefabBall",void 0),__decorate([s(cc.Label)],o.prototype,"lbScoreCount",void 0),__decorate([s([cc.Prefab])],o.prototype,"prefabsBarriers",void 0),__decorate([s([r.default])],o.prototype,"balls",void 0),o=__decorate([a],o)}(cc.Component);e.default=l,cc._RF.pop()},{"./Ball":"Ball","./Barrier":"Barrier","./Config":"Config"}],MyMotionStreak:[function(t,o,e){"use strict";cc._RF.push(o,"fd388R2SIJIgKDbBvh1vpKx","MyMotionStreak"),Object.defineProperty(e,"__esModule",{value:!0});var r=t("./Ball"),n=cc._decorator,i=n.ccclass,c=n.property,a=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.ball=null,o}return __extends(o,t),o.prototype.update=function(t){this.node.position=this.ball.node.position},__decorate([c(r.default)],o.prototype,"ball",void 0),o=__decorate([i],o)}(cc.Component);e.default=a,cc._RF.pop()},{"./Ball":"Ball"}],PhyclsEnable:[function(t,o,e){"use strict";cc._RF.push(o,"bf2b2FKICRM1YGyVM1jxkBg","PhyclsEnable"),Object.defineProperty(e,"__esModule",{value:!0});var r=cc._decorator,n=r.ccclass,i=(r.property,function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return __extends(o,t),o.prototype.onLoad=function(){var t=cc.director.getPhysicsManager();t.enabled=!0,t.gravity=cc.v2(0,-1e3)},o.prototype.start=function(){},o=__decorate([n],o)}(cc.Component));e.default=i,cc._RF.pop()},{}]},{},["Ball","Barrier","Config","MainController","MyMotionStreak","PhyclsEnable"]);